!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.speakItem=e():"undefined"!=typeof global?global.speakItem=e():"undefined"!=typeof self&&(self.speakItem=e())}(function(){return function e(n,o,f){function t(i,p){if(!o[i]){if(!n[i]){var s="function"==typeof require&&require;if(!p&&s)return s(i,!0);if(d)return d(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=o[i]={exports:{}};n[i][0].call(u.exports,function(e){var o=n[i][1][e];return t(o?o:e)},u,u.exports,e,n,o,f)}return o[i].exports}for(var d="function"==typeof require&&require,i=0;i<f.length;i++)t(f[i]);return t}({1:[function(e,n,o){function f(e){for(var n=-1,o=e?e.length:0,f=-1,t=[];++n<o;){var d=e[n];d&&(t[++f]=d)}return t}n.exports=f},{}],2:[function(e,n,o){function f(e){var n=e?e.length:0;return n?e[n-1]:void 0}n.exports=f},{}],3:[function(e,n,o){function f(e,n,o){var f=p(e)?t:i;return n=d(n,o,3),f(e,n)}var t=e("../internal/arrayFilter"),d=e("../internal/baseCallback"),i=e("../internal/baseFilter"),p=e("../lang/isArray");n.exports=f},{"../internal/arrayFilter":7,"../internal/baseCallback":11,"../internal/baseFilter":13,"../lang/isArray":51}],4:[function(e,n,o){var f=e("../internal/baseEach"),t=e("../internal/createFind"),d=t(f);n.exports=d},{"../internal/baseEach":12,"../internal/createFind":33}],5:[function(e,n,o){function f(e,n,o){var f=p(e)?t:i;return n=d(n,o,3),f(e,n)}var t=e("../internal/arrayMap"),d=e("../internal/baseCallback"),i=e("../internal/baseMap"),p=e("../lang/isArray");n.exports=f},{"../internal/arrayMap":8,"../internal/baseCallback":11,"../internal/baseMap":22,"../lang/isArray":51}],6:[function(e,n,o){var f=e("../internal/arrayReduce"),t=e("../internal/baseEach"),d=e("../internal/createReduce"),i=d(f,t);n.exports=i},{"../internal/arrayReduce":9,"../internal/baseEach":12,"../internal/createReduce":34}],7:[function(e,n,o){function f(e,n){for(var o=-1,f=e.length,t=-1,d=[];++o<f;){var i=e[o];n(i,o,e)&&(d[++t]=i)}return d}n.exports=f},{}],8:[function(e,n,o){function f(e,n){for(var o=-1,f=e.length,t=Array(f);++o<f;)t[o]=n(e[o],o,e);return t}n.exports=f},{}],9:[function(e,n,o){function f(e,n,o,f){var t=-1,d=e.length;for(f&&d&&(o=e[++t]);++t<d;)o=n(o,e[t],t,e);return o}n.exports=f},{}],10:[function(e,n,o){function f(e,n){for(var o=-1,f=e.length;++o<f;)if(n(e[o],o,e))return!0;return!1}n.exports=f},{}],11:[function(e,n,o){function f(e,n,o){var f=typeof e;return"function"==f?void 0===n?e:i(e,n,o):null==e?p:"object"==f?t(e):void 0===n?s(e):d(e,n)}var t=e("./baseMatches"),d=e("./baseMatchesProperty"),i=e("./bindCallback"),p=e("../utility/identity"),s=e("../utility/property");n.exports=f},{"../utility/identity":60,"../utility/property":61,"./baseMatches":23,"./baseMatchesProperty":24,"./bindCallback":30}],12:[function(e,n,o){var f=e("./baseForOwn"),t=e("./createBaseEach"),d=t(f);n.exports=d},{"./baseForOwn":17,"./createBaseEach":31}],13:[function(e,n,o){function f(e,n){var o=[];return t(e,function(e,f,t){n(e,f,t)&&o.push(e)}),o}var t=e("./baseEach");n.exports=f},{"./baseEach":12}],14:[function(e,n,o){function f(e,n,o,f){var t;return o(e,function(e,o,d){return n(e,o,d)?(t=f?o:e,!1):void 0}),t}n.exports=f},{}],15:[function(e,n,o){function f(e,n,o){for(var f=e.length,t=o?f:-1;o?t--:++t<f;)if(n(e[t],t,e))return t;return-1}n.exports=f},{}],16:[function(e,n,o){var f=e("./createBaseFor"),t=f();n.exports=t},{"./createBaseFor":32}],17:[function(e,n,o){function f(e,n){return t(e,n,d)}var t=e("./baseFor"),d=e("../object/keys");n.exports=f},{"../object/keys":57,"./baseFor":16}],18:[function(e,n,o){function f(e,n,o){if(null!=e){void 0!==o&&o in t(e)&&(n=[o]);for(var f=0,d=n.length;null!=e&&d>f;)e=e[n[f++]];return f&&f==d?e:void 0}}var t=e("./toObject");n.exports=f},{"./toObject":48}],19:[function(e,n,o){function f(e,n,o,p,s,u){return e===n?!0:null==e||null==n||!d(e)&&!i(n)?e!==e&&n!==n:t(e,n,f,o,p,s,u)}var t=e("./baseIsEqualDeep"),d=e("../lang/isObject"),i=e("./isObjectLike");n.exports=f},{"../lang/isObject":54,"./baseIsEqualDeep":20,"./isObjectLike":45}],20:[function(e,n,o){function f(e,n,o,f,c,w,b){var k=p(e),r=p(n),I=l,g=l;k||(I=y.call(e),I==u?I=a:I!=a&&(k=s(e))),r||(g=y.call(n),g==u?g=a:g!=a&&(r=s(n)));var x=I==a,j=g==a,h=I==g;if(h&&!k&&!x)return d(e,n,I);if(!c){var q=x&&m.call(e,"__wrapped__"),v=j&&m.call(n,"__wrapped__");if(q||v)return o(q?e.value():e,v?n.value():n,f,c,w,b)}if(!h)return!1;w||(w=[]),b||(b=[]);for(var z=w.length;z--;)if(w[z]==e)return b[z]==n;w.push(e),b.push(n);var A=(k?t:i)(e,n,o,f,c,w,b);return w.pop(),b.pop(),A}var t=e("./equalArrays"),d=e("./equalByTag"),i=e("./equalObjects"),p=e("../lang/isArray"),s=e("../lang/isTypedArray"),u="[object Arguments]",l="[object Array]",a="[object Object]",c=Object.prototype,m=c.hasOwnProperty,y=c.toString;n.exports=f},{"../lang/isArray":51,"../lang/isTypedArray":56,"./equalArrays":35,"./equalByTag":36,"./equalObjects":37}],21:[function(e,n,o){function f(e,n,o){var f=n.length,i=f,p=!o;if(null==e)return!i;for(e=d(e);f--;){var s=n[f];if(p&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++f<i;){s=n[f];var u=s[0],l=e[u],a=s[1];if(p&&s[2]){if(void 0===l&&!(u in e))return!1}else{var c=o?o(l,a,u):void 0;if(!(void 0===c?t(a,l,o,!0):c))return!1}}return!0}var t=e("./baseIsEqual"),d=e("./toObject");n.exports=f},{"./baseIsEqual":19,"./toObject":48}],22:[function(e,n,o){function f(e,n){var o=-1,f=d(e)?Array(e.length):[];return t(e,function(e,t,d){f[++o]=n(e,t,d)}),f}var t=e("./baseEach"),d=e("./isArrayLike");n.exports=f},{"./baseEach":12,"./isArrayLike":41}],23:[function(e,n,o){function f(e){var n=d(e);if(1==n.length&&n[0][2]){var o=n[0][0],f=n[0][1];return function(e){return null==e?!1:e[o]===f&&(void 0!==f||o in i(e))}}return function(e){return t(e,n)}}var t=e("./baseIsMatch"),d=e("./getMatchData"),i=e("./toObject");n.exports=f},{"./baseIsMatch":21,"./getMatchData":39,"./toObject":48}],24:[function(e,n,o){function f(e,n){var o=p(e),f=s(e)&&u(n),m=e+"";return e=c(e),function(p){if(null==p)return!1;var s=m;if(p=a(p),(o||!f)&&!(s in p)){if(p=1==e.length?p:t(p,i(e,0,-1)),null==p)return!1;s=l(e),p=a(p)}return p[s]===n?void 0!==n||s in p:d(n,p[s],void 0,!0)}}var t=e("./baseGet"),d=e("./baseIsEqual"),i=e("./baseSlice"),p=e("../lang/isArray"),s=e("./isKey"),u=e("./isStrictComparable"),l=e("../array/last"),a=e("./toObject"),c=e("./toPath");n.exports=f},{"../array/last":2,"../lang/isArray":51,"./baseGet":18,"./baseIsEqual":19,"./baseSlice":28,"./isKey":43,"./isStrictComparable":46,"./toObject":48,"./toPath":49}],25:[function(e,n,o){function f(e){return function(n){return null==n?void 0:n[e]}}n.exports=f},{}],26:[function(e,n,o){function f(e){var n=e+"";return e=d(e),function(o){return t(o,e,n)}}var t=e("./baseGet"),d=e("./toPath");n.exports=f},{"./baseGet":18,"./toPath":49}],27:[function(e,n,o){function f(e,n,o,f,t){return t(e,function(e,t,d){o=f?(f=!1,e):n(o,e,t,d)}),o}n.exports=f},{}],28:[function(e,n,o){function f(e,n,o){var f=-1,t=e.length;n=null==n?0:+n||0,0>n&&(n=-n>t?0:t+n),o=void 0===o||o>t?t:+o||0,0>o&&(o+=t),t=n>o?0:o-n>>>0,n>>>=0;for(var d=Array(t);++f<t;)d[f]=e[f+n];return d}n.exports=f},{}],29:[function(e,n,o){function f(e){return null==e?"":e+""}n.exports=f},{}],30:[function(e,n,o){function f(e,n,o){if("function"!=typeof e)return t;if(void 0===n)return e;switch(o){case 1:return function(o){return e.call(n,o)};case 3:return function(o,f,t){return e.call(n,o,f,t)};case 4:return function(o,f,t,d){return e.call(n,o,f,t,d)};case 5:return function(o,f,t,d,i){return e.call(n,o,f,t,d,i)}}return function(){return e.apply(n,arguments)}}var t=e("../utility/identity");n.exports=f},{"../utility/identity":60}],31:[function(e,n,o){function f(e,n){return function(o,f){var p=o?t(o):0;if(!d(p))return e(o,f);for(var s=n?p:-1,u=i(o);(n?s--:++s<p)&&f(u[s],s,u)!==!1;);return o}}var t=e("./getLength"),d=e("./isLength"),i=e("./toObject");n.exports=f},{"./getLength":38,"./isLength":44,"./toObject":48}],32:[function(e,n,o){function f(e){return function(n,o,f){for(var d=t(n),i=f(n),p=i.length,s=e?p:-1;e?s--:++s<p;){var u=i[s];if(o(d[u],u,d)===!1)break}return n}}var t=e("./toObject");n.exports=f},{"./toObject":48}],33:[function(e,n,o){function f(e,n){return function(o,f,s){if(f=t(f,s,3),p(o)){var u=i(o,f,n);return u>-1?o[u]:void 0}return d(o,f,e)}}var t=e("./baseCallback"),d=e("./baseFind"),i=e("./baseFindIndex"),p=e("../lang/isArray");n.exports=f},{"../lang/isArray":51,"./baseCallback":11,"./baseFind":14,"./baseFindIndex":15}],34:[function(e,n,o){function f(e,n){return function(o,f,p,s){var u=arguments.length<3;return"function"==typeof f&&void 0===s&&i(o)?e(o,f,p,u):d(o,t(f,s,4),p,u,n)}}var t=e("./baseCallback"),d=e("./baseReduce"),i=e("../lang/isArray");n.exports=f},{"../lang/isArray":51,"./baseCallback":11,"./baseReduce":27}],35:[function(e,n,o){function f(e,n,o,f,d,i,p){var s=-1,u=e.length,l=n.length;if(u!=l&&!(d&&l>u))return!1;for(;++s<u;){var a=e[s],c=n[s],m=f?f(d?c:a,d?a:c,s):void 0;if(void 0!==m){if(m)continue;return!1}if(d){if(!t(n,function(e){return a===e||o(a,e,f,d,i,p)}))return!1}else if(a!==c&&!o(a,c,f,d,i,p))return!1}return!0}var t=e("./arraySome");n.exports=f},{"./arraySome":10}],36:[function(e,n,o){function f(e,n,o){switch(o){case t:case d:return+e==+n;case i:return e.name==n.name&&e.message==n.message;case p:return e!=+e?n!=+n:e==+n;case s:case u:return e==n+""}return!1}var t="[object Boolean]",d="[object Date]",i="[object Error]",p="[object Number]",s="[object RegExp]",u="[object String]";n.exports=f},{}],37:[function(e,n,o){function f(e,n,o,f,d,p,s){var u=t(e),l=u.length,a=t(n),c=a.length;if(l!=c&&!d)return!1;for(var m=l;m--;){var y=u[m];if(!(d?y in n:i.call(n,y)))return!1}for(var w=d;++m<l;){y=u[m];var b=e[y],k=n[y],r=f?f(d?k:b,d?b:k,y):void 0;if(!(void 0===r?o(b,k,f,d,p,s):r))return!1;w||(w="constructor"==y)}if(!w){var I=e.constructor,g=n.constructor;if(I!=g&&"constructor"in e&&"constructor"in n&&!("function"==typeof I&&I instanceof I&&"function"==typeof g&&g instanceof g))return!1}return!0}var t=e("../object/keys"),d=Object.prototype,i=d.hasOwnProperty;n.exports=f},{"../object/keys":57}],38:[function(e,n,o){var f=e("./baseProperty"),t=f("length");n.exports=t},{"./baseProperty":25}],39:[function(e,n,o){function f(e){for(var n=d(e),o=n.length;o--;)n[o][2]=t(n[o][1]);return n}var t=e("./isStrictComparable"),d=e("../object/pairs");n.exports=f},{"../object/pairs":59,"./isStrictComparable":46}],40:[function(e,n,o){function f(e,n){var o=null==e?void 0:e[n];return t(o)?o:void 0}var t=e("../lang/isNative");n.exports=f},{"../lang/isNative":53}],41:[function(e,n,o){function f(e){return null!=e&&d(t(e))}var t=e("./getLength"),d=e("./isLength");n.exports=f},{"./getLength":38,"./isLength":44}],42:[function(e,n,o){function f(e,n){return e="number"==typeof e||t.test(e)?+e:-1,n=null==n?d:n,e>-1&&e%1==0&&n>e}var t=/^\d+$/,d=9007199254740991;n.exports=f},{}],43:[function(e,n,o){function f(e,n){var o=typeof e;if("string"==o&&p.test(e)||"number"==o)return!0;if(t(e))return!1;var f=!i.test(e);return f||null!=n&&e in d(n)}var t=e("../lang/isArray"),d=e("./toObject"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/;n.exports=f},{"../lang/isArray":51,"./toObject":48}],44:[function(e,n,o){function f(e){return"number"==typeof e&&e>-1&&e%1==0&&t>=e}var t=9007199254740991;n.exports=f},{}],45:[function(e,n,o){function f(e){return!!e&&"object"==typeof e}n.exports=f},{}],46:[function(e,n,o){function f(e){return e===e&&!t(e)}var t=e("../lang/isObject");n.exports=f},{"../lang/isObject":54}],47:[function(e,n,o){function f(e){for(var n=s(e),o=n.length,f=o&&e.length,u=!!f&&p(f)&&(d(e)||t(e)),a=-1,c=[];++a<o;){var m=n[a];(u&&i(m,f)||l.call(e,m))&&c.push(m)}return c}var t=e("../lang/isArguments"),d=e("../lang/isArray"),i=e("./isIndex"),p=e("./isLength"),s=e("../object/keysIn"),u=Object.prototype,l=u.hasOwnProperty;n.exports=f},{"../lang/isArguments":50,"../lang/isArray":51,"../object/keysIn":58,"./isIndex":42,"./isLength":44}],48:[function(e,n,o){function f(e){return t(e)?e:Object(e)}var t=e("../lang/isObject");n.exports=f},{"../lang/isObject":54}],49:[function(e,n,o){function f(e){if(d(e))return e;var n=[];return t(e).replace(i,function(e,o,f,t){n.push(f?t.replace(p,"$1"):o||e)}),n}var t=e("./baseToString"),d=e("../lang/isArray"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,p=/\\(\\)?/g;n.exports=f},{"../lang/isArray":51,"./baseToString":29}],50:[function(e,n,o){function f(e){return d(e)&&t(e)&&p.call(e,"callee")&&!s.call(e,"callee")}var t=e("../internal/isArrayLike"),d=e("../internal/isObjectLike"),i=Object.prototype,p=i.hasOwnProperty,s=i.propertyIsEnumerable;n.exports=f},{"../internal/isArrayLike":41,"../internal/isObjectLike":45}],51:[function(e,n,o){var f=e("../internal/getNative"),t=e("../internal/isLength"),d=e("../internal/isObjectLike"),i="[object Array]",p=Object.prototype,s=p.toString,u=f(Array,"isArray"),l=u||function(e){return d(e)&&t(e.length)&&s.call(e)==i};n.exports=l},{"../internal/getNative":40,"../internal/isLength":44,"../internal/isObjectLike":45}],52:[function(e,n,o){function f(e){return t(e)&&p.call(e)==d}var t=e("./isObject"),d="[object Function]",i=Object.prototype,p=i.toString;n.exports=f},{"./isObject":54}],53:[function(e,n,o){function f(e){return null==e?!1:t(e)?l.test(s.call(e)):d(e)&&i.test(e)}var t=e("./isFunction"),d=e("../internal/isObjectLike"),i=/^\[object .+?Constructor\]$/,p=Object.prototype,s=Function.prototype.toString,u=p.hasOwnProperty,l=RegExp("^"+s.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=f},{"../internal/isObjectLike":45,"./isFunction":52}],54:[function(e,n,o){function f(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}n.exports=f},{}],55:[function(e,n,o){function f(e){return"string"==typeof e||t(e)&&p.call(e)==d}var t=e("../internal/isObjectLike"),d="[object String]",i=Object.prototype,p=i.toString;n.exports=f},{"../internal/isObjectLike":45}],56:[function(e,n,o){function f(e){return d(e)&&t(e.length)&&!!C[E.call(e)]}var t=e("../internal/isLength"),d=e("../internal/isObjectLike"),i="[object Arguments]",p="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",a="[object Function]",c="[object Map]",m="[object Number]",y="[object Object]",w="[object RegExp]",b="[object Set]",k="[object String]",r="[object WeakMap]",I="[object ArrayBuffer]",g="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",h="[object Int16Array]",q="[object Int32Array]",v="[object Uint8Array]",z="[object Uint8ClampedArray]",A="[object Uint16Array]",B="[object Uint32Array]",C={};C[g]=C[x]=C[j]=C[h]=C[q]=C[v]=C[z]=C[A]=C[B]=!0,C[i]=C[p]=C[I]=C[s]=C[u]=C[l]=C[a]=C[c]=C[m]=C[y]=C[w]=C[b]=C[k]=C[r]=!1;var D=Object.prototype,E=D.toString;n.exports=f},{"../internal/isLength":44,"../internal/isObjectLike":45}],57:[function(e,n,o){var f=e("../internal/getNative"),t=e("../internal/isArrayLike"),d=e("../lang/isObject"),i=e("../internal/shimKeys"),p=f(Object,"keys"),s=p?function(e){var n=null==e?void 0:e.constructor;return"function"==typeof n&&n.prototype===e||"function"!=typeof e&&t(e)?i(e):d(e)?p(e):[]}:i;n.exports=s},{"../internal/getNative":40,"../internal/isArrayLike":41,"../internal/shimKeys":47,"../lang/isObject":54}],58:[function(e,n,o){function f(e){if(null==e)return[];s(e)||(e=Object(e));var n=e.length;n=n&&p(n)&&(d(e)||t(e))&&n||0;for(var o=e.constructor,f=-1,u="function"==typeof o&&o.prototype===e,a=Array(n),c=n>0;++f<n;)a[f]=f+"";for(var m in e)c&&i(m,n)||"constructor"==m&&(u||!l.call(e,m))||a.push(m);return a}var t=e("../lang/isArguments"),d=e("../lang/isArray"),i=e("../internal/isIndex"),p=e("../internal/isLength"),s=e("../lang/isObject"),u=Object.prototype,l=u.hasOwnProperty;n.exports=f},{"../internal/isIndex":42,"../internal/isLength":44,"../lang/isArguments":50,"../lang/isArray":51,"../lang/isObject":54}],59:[function(e,n,o){function f(e){e=d(e);for(var n=-1,o=t(e),f=o.length,i=Array(f);++n<f;){var p=o[n];i[n]=[p,e[p]]}return i}var t=e("./keys"),d=e("../internal/toObject");n.exports=f},{"../internal/toObject":48,"./keys":57}],60:[function(e,n,o){function f(e){return e}n.exports=f},{}],61:[function(e,n,o){function f(e){return i(e)?t(e):d(e)}var t=e("../internal/baseProperty"),d=e("../internal/basePropertyDeep"),i=e("../internal/isKey");n.exports=f},{"../internal/baseProperty":25,"../internal/basePropertyDeep":26,"../internal/isKey":43}],62:[function(e,n,o){n.exports={options:function(e,n){return{dataType:"json",type:e,data:n}},convertResponse:function(e){return 200!==e.statusCode?$.Deferred().reject({readyState:4,status:e.statusCode,responseText:e.error.message}):e.result},triggerCreated:function(e){return _sc.trigger("item:created",e),e},get:function(e){return $.ajax({url:e,dataType:"JSON"})}}},{}],63:[function(e,n,o){var f=e("lodash/lang/isString");n.exports={isId:function(e){return f(e)?/^\{?[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\}?$/i.test(e):!1}}},{"lodash/lang/isString":55}],64:[function(e,n,o){var f=e("../model/item"),t=function(e){if(!e.result)return console.debug("ERROR: No data from server"),{items:[],totalCount:0,data:e};if(!e.result.items)return console.debug("ERROR: No items from server"),{items:[],totalCount:0,data:e};var n=[];return e.result.items.forEach(function(e){n.push(new f(e))}),{items:n,total:e.result.totalCount,data:e.result}},d=function(e){var n={item:null,data:e};return e.result?e.result.items?0===e.result.items.length?n:e.result.items.length>1?(console.debug("ERROR: Expected a single item"),n):(n.item=new f(e.result.items[0]),n):(console.debug("ERROR: No items from server"),n):(console.debug("ERROR: No data from server"),n)};n.exports={convertToItem:d,convertToItems:t}},{"../model/item":74}],65:[function(e,n,o){var f=e("./urlHelper"),t=e("lodash/array/compact"),d=e("lodash/lang/isString"),i=e("lodash/lang/isArray"),p=e("lodash/collection/map"),s=e("./idHelper"),u=function(e){switch(e){case"self":return"s";case"children":return"c";case"parent":return"p";default:throw"Unsupported scope. It must be either 'self', 'children' or 'parent'"}},l=function(e,n){if(n&&i(n)){var o=t(p(n,u)).join("|");e=f.addQueryParameters(e,{scope:o})}return e},a=function(e,n){return n&&d(n)&&(e=f.addQueryParameters(e,{sc_database:n})),e},c=function(e,n){return n&&d(n)&&(e=f.addQueryParameters(e,{sc_content:n})),e},m=function(e,n,o){return n&&d(n)&&(o&&o.facetsRootItemId&&(e=f.addQueryParameters(e,{facetsRootItemId:o.facetsRootItemId})),0===n.indexOf("search:")?(e=f.addQueryParameters(e,{search:n.substr("search:".length)}),o&&o.root&&s.isId(o.root)&&(e=f.addQueryParameters(e,{root:o.root})),o&&o.searchConfig&&(e=f.addQueryParameters(e,{searchConfig:o.searchConfig}))):e=0===n.indexOf("query:")?f.addQueryParameters(e,{query:n.substr("query:".length)}):s.isId(n)?f.addQueryParameters(e,{sc_itemid:n}):f.combine(e,n)),e},y=function(e,n){return n&&(e=f.addQueryParameters(e,{language:n})),e},w=function(e,n){return n&&(e=f.addQueryParameters(e,{sc_itemversion:n})),e},b=function(e,n){n=n||{};var o="/-/item/v1",t="";n.webApi&&(o=n.webApi),n.virtualFolder&&(t=n.virtualFolder);var d=f.combine(o,t);return d=m(d,e,n),n.scope&&(d=l(d,n.scope)),n.database&&""!==e&&0===e.indexOf("search:")?d=c(d,n.database):n.database&&(d=a(d,n.database)),n.language&&(d=y(d,n.language)),n.version&&(d=w(d,n.version)),n.payLoad&&(d=f.addQueryParameters(d,{payload:"full"})),n.formatting&&(d=f.addQueryParameters(d,{format:n.formatting})),n.sorting&&(d=f.addQueryParameters(d,{sorting:n.sorting})),n.showHiddenItems&&(d=f.addQueryParameters(d,{showHiddenItems:n.showHiddenItems})),n.fields&&(d=f.addQueryParameters(d,{fields:n.fields.join("|")})),n.pageSize&&n.pageSize>0&&(d=0===e.indexOf("search:")?f.addQueryParameters(d,{pageIndex:n.pageIndex,pageSize:n.pageSize}):f.addQueryParameters(d,{page:n.pageIndex,pageSize:n.pageSize})),d};n.exports={buildUrl:b,getUrl:function(e,n,o){o=o||{},o.database||(o.database=n.databaseName),o.webApi||(o.webApi=n.webApi),o.virtualFolder||(o.virtualFolder=n.virtualFolder);var f=b(e,o);return f}}},{"./idHelper":63,"./urlHelper":66,"lodash/array/compact":1,"lodash/collection/map":5,"lodash/lang/isArray":51,"lodash/lang/isString":55}],66:[function(e,n,o){var f=e("lodash/collection/reduce"),t=e("lodash/array/compact"),d=e("lodash/object/pairs"),i=function(e,n){return e.indexOf("?"+n+"=")>=0||e.indexOf("&"+n+"=")>=0};n.exports={combine:function(){if(0===arguments.length)return"";var e=f(arguments,function(e,n){return n?e+"/"+t(n.split("/")).join("/"):e});return e?0===e.indexOf("/")?e:"/"+e:""},isParameterNameAlreadyInUrl:i,addQueryParameters:function(e,n){var o,f=d(n),t="([\\?&])({{param}}=[^&]+)",p=e;return f.forEach(function(e){i(p,e[0])?(o=new RegExp(t.replace("{{param}}",encodeURIComponent(e[0])),"i"),p=p.replace(o,"$1"+e[0]+"="+e[1])):(p=p+=~p.indexOf("?")?"&":"?",p+=encodeURIComponent(e[0])+"="+encodeURIComponent(e[1]))}),p},getQueryParameters:function(e){var n,o={};return e?(n=e.split("?"),(n=n.length>1?n[1].split("&"):n[0].split("&"))?(n.forEach(function(e){var n=e.split("=");2===n.length&&(o[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}),o):void 0):o}}},{"lodash/array/compact":1,"lodash/collection/reduce":6,"lodash/object/pairs":59}],67:[function(e,n,o){var f=e("./model/databaseUri"),t=e("./model/database");e("./helpers/itemWebApiUrlHelper");n.exports={search:function(e,n){e="string"==typeof e||e instanceof String?{searchText:e}:e||{};var o=new f(e.database),d=new t(o);return d.search(e.searchText,n,e)},query:function(e,n){e="string"==typeof e||e instanceof String?{query:e}:e||{};var o=new f(e.database),d=new t(o);return d.query(e.query,n,e)},fetch:function(e,n,o){var d,i;arguments.length<3?(i=n,d={}):(d=n,i=o);var p=new f(d.database),s=new t(p);return s.fetch(e,i,d)},fetchChildren:function(e,n,o){var d,i;2===arguments.length?(i=n,d={}):(d=n,i=o);var p=new f(d.database),s=new t(p);return s.fetchChildren(e,i,d)},create:e("./repo").create}},{"./helpers/itemWebApiUrlHelper":65,"./model/database":70,"./model/databaseUri":71,"./repo":75}],68:[function(e,n,o){var f=function(e,n){if(!e)throw"Parameter 'databaseUri' is null or empty";if(!n)throw"Parameter 'itemId' is null or empty";this.databaseUri=e,this.itemId=n};f.prototype.getDatabaseName=function(){return this.databaseUri.databaseName},f.prototype.getDatabaseUri=function(){return this.databaseUri},f.prototype.getItemId=function(){return this.itemId},n.exports=f},{}],69:[function(e,n,o){var f=function(e,n,o){if(!e)throw"Parameter 'itemUri' is null";if(!n)throw"Parameter 'language' is null or empty";if(!_.isNumber(o))throw"Parameter 'version' is null or not a number";this.itemUri=e,this.language=n,this.version=o};f.prototype.getDatabaseUri=function(){return this.itemUri.getDatabaseUri()},f.prototype.getDatabaseName=function(){return this.itemUri.getDatabaseName()},f.prototype.getItemId=function(){return this.itemUri.getItemId()},n.exports=f},{}],70:[function(e,n,o){var f=e("../helpers/itemWebApiUrlHelper"),t=e("../helpers/itemHelper"),d=e("../helpers/ajaxHelper"),i=e("./ItemUri"),p=e("./ItemVersionUri"),s=function(){},u=function(e){if(!e)throw"Parameter 'databaseUri' is null";this.databaseUri=e};u.prototype.fetch=function(e,n,o){if(!e)throw"Parameter 'id' is null";o=o||{},n=n||s,e instanceof i&&(o.database=e.getDatabaseName(),e=e.getItemId()),e instanceof p&&(o.database=e.getDatabaseName(),o.language=e.getLanguage(),o.version=e.getVersion(),e=e.getItemId());var u=f.getUrl(e,this.databaseUri,o);return o.scope&&(_.contains(o.scope,"parent")||_.contains(o.scope,"children"))?d.get(u).pipe(t.convertToItems).then(n):d.get(u).pipe(t.convertToItem).then(function(e){n(e.item,e.data)})},u.prototype.search=function(e,n,o){if(!e&&!o.root&&!o.searchConfig)throw new Error("No search parameters has been passed");n=n||s;var i=f.getUrl("search:"+e,this.databaseUri,o);return d.get(i).pipe(t.convertToItems).then(function(e){n(e.items,e.total,e.data)})},u.prototype.query=function(e,n,o){if(!e)throw"Parameter 'queryExpression' is null";n=n||s;var i=f.getUrl("query:"+e,this.databaseUri,o);return d.get(i).pipe(t.convertToItems).then(function(e){n(e.items,e.total,e.data)})},u.prototype.fetchChildren=function(e,n,o){if(!e)throw"Parameter 'id' is null";o=o||{},n=n||s,o.scope||(o.scope=["children"]);var i=f.getUrl(e,this.databaseUri,o);return d.get(i).pipe(t.convertToItems).then(function(e){n(e.items,e.total,e.data)})},n.exports=u},{"../helpers/ajaxHelper":62,"../helpers/itemHelper":64,"../helpers/itemWebApiUrlHelper":65,"./ItemUri":68,"./ItemVersionUri":69}],71:[function(e,n,o){var f=function(e){this.databaseName=e||"core",this.webApi="",this.virtualFolder="/sitecore/shell"};n.exports=f},{}],72:[function(e,n,o){var f=e("./fieldUri"),t=function(e,n,o,t,d){if(!e)throw"Parameter 'item' is null";if(!(n instanceof f))throw"Parameter 'fieldUri' is null";this.item=e,this.fieldUri=n,this.fieldName=o||"",this.value=t||"",this.type=d||"Single-Line Text"};n.exports=t},{"./fieldUri":73}],73:[function(e,n,o){var f=function(e,n){if(!e)throw"Parameter 'itemVersionUri' is null or empty";if(!n)throw"Parameter 'fieldId' is null or empty";this.itemVersionUri=e,this.fieldId=n};f.prototype.getDatabaseUri=function(){return this.itemVersionUri.getDatabaseUri()},f.prototype.getDatabaseName=function(){return this.itemVersionUri.getDatabaseName()},f.prototype.getItemUri=function(){return this.itemVersionUri.getItemUri()},f.prototype.getItemId=function(){return this.itemVersionUri.getItemId()},f.prototype.getLanguage=function(){return this.itemVersionUri.getLanguage()},f.prototype.getVersion=function(){return this.itemVersionUri.getVersion()},n.exports=f},{}],74:[function(e,n,o){var f=e("lodash/collection/map"),t=e("lodash/collection/find"),d=(e("lodash/collection/filter"),e("./fieldUri")),i=e("./databaseUri"),p=e("./ItemUri"),s=e("../helpers/ajaxHelper"),u=e("./field"),l=e("../helpers/itemWebApiUrlHelper"),a=function(e){this.$fields=e.$fields;var n=this;e.$fields.forEach(function(e,o){n[e.Name]=e.Value}),this.$itemUri=e.$itemUri,this.$itemId=e.$itemId,this.$itemName=e.$itemName,this.$displayName=e.$displayName,this.$language=e.$language,this.$version=e.$version,this.$templateName=e.$templateName,this.$templateId=e.$templateId,this.$hasChildren=e.$hasChildren,this.$path=e.$path,this.$url=e.$url,this.$mediaurl=e.$mediaurl},c=function(e,n){if(e=e||{},this.databaseUri=new i(e.Database),n||(n=e.itemUri?e.itemUri:new p(this.databaseUri,e.ID)),e instanceof c)return void a.call(this,e);this.$fields=[];var o=this,f=e.Fields||{};for(var t in f)if(f.hasOwnProperty(t)){var s=f[t];o[s.Name]=s.Value;var l=new d(n,t),m=new u(o,l,s.Name,s.Value,s.Type);s.FormattedValue&&(m.formattedValue=s.FormattedValue),s.LongDateValue&&(m.longDateValue=s.LongDateValue),s.ShortDateValue&&(m.shortDateValue=s.ShortDateValue),o.$fields.push(m)}this.$itemUri=n,this.$itemId=n.getItemId(),this.$itemName=e.Name||"",this.$displayName=e.DisplayName||"",this.$database=e.Database||"",this.$language=e.Language||"",this.$version=e.Version||0,this.$templateName=e.TemplateName||"",this.$templateId=e.TemplateId||"",this.$hasChildren=e.HasChildren||!1,this.$path=e.Path||"",this.$url=e.Url||"",this.$mediaurl=e.MediaUrl||"",this.$icon=e.Icon||""};c.prototype.getFieldById=function(e){return t(this.$fields,function(n){return n.fieldUri.getFieldId()===e},this)},c.prototype.save=function(e,n){var o=f(this.$fields,function(e){return{name:e.fieldName,value:this[e.fieldName]}},this),t=l.getUrl(this.$itemId,this.databaseUri),d={dataType:"json",type:"PUT",data:o};return $.when($.ajax(t,d)).pipe(s.convertResponse).then($.proxy(e,n))},c.prototype.rename=function(e,n,o){var f=[{name:"__itemName",value:e}],t=l.getUrl(this.$itemId,this.databaseUri),d={dataType:"json",type:"PUT",data:f};return $.when($.ajax(t,d)).pipe(s.convertResponse).then($.proxy(n,o))},c.prototype.remove=function(e,n){var o=l.getUrl(this.$itemId,this.databaseUri),f={dataType:"json",type:"DELETE"};return $.when($.ajax(o,f)).pipe(s.convertResponse).then($.proxy(e,n))},n.exports=c},{"../helpers/ajaxHelper":62,"../helpers/itemWebApiUrlHelper":65,"./ItemUri":68,"./databaseUri":71,"./field":72,"./fieldUri":73,"lodash/collection/filter":3,"lodash/collection/find":4,"lodash/collection/map":5}],75:[function(e,n,o){var f=e("../helpers/itemWebApiUrlHelper"),t=(e("../helpers/itemHelper"),e("../helpers/urlHelper")),d=e("../helpers/ajaxHelper"),i=e("../model/item"),p=(e("../model/field"),function(){}),s={create:function(e,n){var o=e,s=Sitecore.Speak.utils.security.antiForgery.getAntiForgeryToken();if(n=n||p,!e.Name||!e.TemplateId||!e.ParentId)throw"Provide valid parameter in order to create an Item";e.Database||(e.Database="core");var u=f.buildUrl(o.ParentId,{webApi:"/-/item/v1/sitecore/shell",database:e.Database});return u=t.addQueryParameters(u,{name:e.Name}),u=t.addQueryParameters(u,{template:e.TemplateId}),e.Fields[s.formKey]=s.value,$.when($.ajax(u,d.options("POST",e.Fields))).pipe(d.convertResponse).pipe(function(e){return new i(e.items)}).then(n)}};n.exports=s},{"../helpers/ajaxHelper":62,"../helpers/itemHelper":64,"../helpers/itemWebApiUrlHelper":65,"../helpers/urlHelper":66,"../model/field":72,"../model/item":74}]},{},[67])(67)});